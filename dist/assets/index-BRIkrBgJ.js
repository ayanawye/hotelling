import{g as ee,m as te,a0 as oe,a1 as I,d as se,a2 as re,a3 as ne,a4 as le,a5 as ae,r as c,c as k,H as ie,i as F,a6 as ce,e as de,a7 as pe,M as me,a8 as ge,a9 as ue,j as e,B as y,u as xe,s as he}from"./index-CbnrRa6C.js";import{x as fe,y as ve,I as ye,S as Ce,T as Ne}from"./organizationTypesApi-BjGicNoR.js";import{D as ke,T as be}from"./TableActions-B_fl8NNI.js";import{S as we}from"./filterIcon-Cj91mwnd.js";import{S as T,D as je}from"./SelectWithSearch-BkX9hQR8.js";import{T as _e}from"./index-hJjDEiK8.js";const _=t=>t?typeof t=="function"?t():t:null,$="50%",Se=t=>{const{componentCls:o,popoverColor:n,titleMinWidth:d,fontWeightStrong:r,innerPadding:s,boxShadowSecondary:p,colorTextHeading:m,borderRadiusLG:g,zIndexPopup:u,titleMarginBottom:x,colorBgElevated:h,popoverBg:i,titleBorderBottom:l,innerContentPadding:f,titlePadding:v,antCls:N}=t,[b,C]=I(N,"tooltip");return[{[o]:{...se(t),position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:u,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text",[b("valid-offset-x")]:C("arrow-offset-horizontal","var(--arrow-x)"),transformOrigin:[C("valid-offset-x",$),`var(--arrow-y, ${$})`].join(" "),[b("arrow-background-color")]:h,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${o}-content`]:{position:"relative"},[`${o}-container`]:{backgroundColor:i,backgroundClip:"padding-box",borderRadius:g,boxShadow:p,padding:s},[`${o}-title`]:{minWidth:d,marginBottom:x,color:m,fontWeight:r,borderBottom:l,padding:v},[`${o}-content`]:{color:n,padding:f}}},re(t,C("arrow-background-color")),{[`${o}-pure`]:{position:"relative",maxWidth:"none",margin:t.sizePopupArrow,display:"inline-block"}}]},Te=t=>{const{componentCls:o,antCls:n}=t,[d]=I(n,"tooltip");return{[o]:ne.map(r=>{const s=t[`${r}6`];return{[`&${o}-${r}`]:{[d("arrow-background-color")]:s,[`${o}-inner`]:{backgroundColor:s},[`${o}-arrow`]:{background:"transparent"}}}})}},Le=t=>{const{lineWidth:o,controlHeight:n,fontHeight:d,padding:r,wireframe:s,zIndexPopupBase:p,borderRadiusLG:m,marginXS:g,lineType:u,colorSplit:x,paddingSM:h}=t,i=n-d,l=i/2,f=i/2-o,v=r;return{titleMinWidth:177,zIndexPopup:p+30,...ae(t),...le({contentRadius:m,limitVerticalRadius:!0}),innerPadding:s?0:12,titleMarginBottom:s?0:g,titlePadding:s?`${l}px ${v}px ${f}px`:0,titleBorderBottom:s?`${o}px ${u} ${x}`:"none",innerContentPadding:s?`${h}px ${v}px`:0}},W=ee("Popover",t=>{const{colorBgElevated:o,colorText:n}=t,d=te(t,{popoverBg:o,popoverColor:n});return[Se(d),Te(d),oe(d,"zoom-big")]},Le,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]}),E=t=>{const{title:o,content:n,prefixCls:d,classNames:r,styles:s}=t;return!o&&!n?null:c.createElement(c.Fragment,null,o&&c.createElement("div",{className:k(`${d}-title`,r?.title),style:s?.title},o),n&&c.createElement("div",{className:k(`${d}-content`,r?.content),style:s?.content},n))},Pe=t=>{const{hashId:o,prefixCls:n,className:d,style:r,placement:s="top",title:p,content:m,children:g,classNames:u,styles:x}=t,h=_(p),i=_(m),l={...t,placement:s},[f,v]=F([u],[x],{props:l}),N=k(o,n,`${n}-pure`,`${n}-placement-${s}`,d);return c.createElement("div",{className:N,style:r},c.createElement("div",{className:`${n}-arrow`}),c.createElement(ce,{...t,className:o,prefixCls:n,classNames:f,styles:v},g||c.createElement(E,{prefixCls:n,title:h,content:i,classNames:f,styles:v})))},Be=t=>{const{prefixCls:o,className:n,...d}=t,{getPrefixCls:r}=c.useContext(ie),s=r("popover",o),[p,m]=W(s);return c.createElement(Pe,{...d,prefixCls:s,hashId:p,className:k(n,m)})},Re=c.forwardRef((t,o)=>{const{prefixCls:n,title:d,content:r,overlayClassName:s,placement:p="top",trigger:m,children:g,mouseEnterDelay:u=.1,mouseLeaveDelay:x=.1,onOpenChange:h,overlayStyle:i={},styles:l,classNames:f,motion:v,arrow:N,...b}=t,{getPrefixCls:C,className:M,style:O,classNames:z,styles:D,arrow:H,trigger:G}=de("popover"),S=C("popover",n),[V,Z]=W(S),q=C(),Q=pe(N,H),L=m||G||"hover",U={...t,placement:p,trigger:L,mouseEnterDelay:u,mouseLeaveDelay:x,overlayStyle:i,styles:l,classNames:f},[w,j]=F([z,f],[D,l],{props:U}),X=k(s,V,Z,M,w.root),[Y,J]=me(t.defaultOpen??!1,t.open),K=R=>{J(R),h?.(R)},P=_(d),B=_(r);return c.createElement(ge,{unique:!1,arrow:Q,placement:p,trigger:L,mouseEnterDelay:u,mouseLeaveDelay:x,...b,prefixCls:S,classNames:{root:X,container:w.container,arrow:w.arrow},styles:{root:{...j.root,...O,...i},container:j.container,arrow:j.arrow},ref:o,open:Y,onOpenChange:K,overlay:P||B?c.createElement(E,{prefixCls:S,title:P,content:B,classNames:w,styles:j}):null,motion:{motionName:ue(q,"zoom-big",typeof v?.motionName=="string"?v?.motionName:void 0)},"data-popover-inject":!0},g)}),A=Re;A._InternalPanelDoNotUseOrYouWillBeFired=Be;const $e=t=>c.createElement("svg",{width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},c.createElement("path",{d:"M16.5 2.25H1.5L7.5 9.345V14.25L10.5 15.75V9.345L16.5 2.25Z",stroke:"#5F5F5F",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),Ie=t=>c.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},c.createElement("path",{d:"M12 4L4 12",stroke:"#5F5F5F",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),c.createElement("path",{d:"M4 4L12 12",stroke:"#5F5F5F",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),Fe="_popoverOverlay_1mas4_1",We="_filterContent_1mas4_22",Ee="_header_1mas4_27",Ae="_title_1mas4_52",Me="_divider_1mas4_58",Oe="_fieldWrapper_1mas4_62",ze="_fieldLabelRow_1mas4_66",De="_fieldLabel_1mas4_66",He="_resetLink_1mas4_78",Ge="_select_1mas4_91",Ve="_footer_1mas4_101",Ze="_resetAllBtn_1mas4_108",qe="_applyBtn_1mas4_116",Qe="_filterTrigger_1mas4_127",a={popoverOverlay:Fe,filterContent:We,header:Ee,title:Ae,divider:Me,fieldWrapper:Oe,fieldLabelRow:ze,fieldLabel:De,resetLink:He,select:Ge,footer:Ve,resetAllBtn:Ze,applyBtn:qe,filterTrigger:Qe},Ue=({onApply:t,onResetAll:o,initialFilters:n})=>{const[d,r]=c.useState(!1),[s,p]=c.useState(n),m=i=>{r(i),i&&p(n)},g=i=>{p(l=>({...l,[i]:void 0}))},u=()=>{t(s),r(!1)},x=()=>{p({enclosure:void 0,floor:void 0,roomType:void 0}),o(),r(!1)},h=e.jsxs("div",{className:a.filterContent,children:[e.jsxs("div",{className:a.header,children:[e.jsxs("div",{className:a.title,children:[e.jsx($e,{})," ",e.jsx("p",{children:"Фильтр"})]}),e.jsx(y,{type:"text",icon:e.jsx(Ie,{}),onClick:()=>r(!1)})]}),e.jsxs("div",{className:a.fieldWrapper,children:[e.jsxs("div",{className:a.fieldLabelRow,children:[e.jsx("span",{className:a.fieldLabel,children:"Выберите корпус"}),e.jsx(y,{type:"link",size:"small",onClick:()=>g("enclosure"),className:a.resetLink,children:"Сбросить"})]}),e.jsx(T,{placeholder:"Корпус",className:a.select,value:s.enclosure,onChange:i=>p(l=>({...l,enclosure:i})),options:[{value:"Корпус 1",label:"Корпус 1"},{value:"Корпус 2",label:"Корпус 2"},{value:"Корпус 3",label:"Корпус 3"}]})]}),e.jsxs("div",{className:a.fieldWrapper,children:[e.jsxs("div",{className:a.fieldLabelRow,children:[e.jsx("span",{className:a.fieldLabel,children:"Выберите этаж"}),e.jsx(y,{type:"link",size:"small",onClick:()=>g("floor"),className:a.resetLink,children:"Сбросить"})]}),e.jsx(T,{placeholder:"Этаж",className:a.select,value:s.floor,onChange:i=>p(l=>({...l,floor:i})),options:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"}]})]}),e.jsxs("div",{className:a.fieldWrapper,children:[e.jsxs("div",{className:a.fieldLabelRow,children:[e.jsx("span",{className:a.fieldLabel,children:"Выберите тип номера"}),e.jsx(y,{type:"link",size:"small",onClick:()=>g("roomType"),className:a.resetLink,children:"Сбросить"})]}),e.jsx(T,{placeholder:"Тип номера",className:a.select,value:s.roomType,onChange:i=>p(l=>({...l,roomType:i})),options:[{value:"Стандарт",label:"Стандарт"},{value:"Люкс",label:"Люкс"},{value:"Делюкс",label:"Делюкс"}]})]}),e.jsx(je,{className:a.divider}),e.jsxs("div",{className:a.footer,children:[e.jsx(y,{onClick:x,className:a.resetAllBtn,children:"Сбросить все"}),e.jsx(y,{type:"primary",onClick:u,className:a.applyBtn,children:"Применить"})]})]});return e.jsx(A,{content:h,trigger:"click",open:d,onOpenChange:m,placement:"bottomRight",overlayClassName:a.popoverOverlay,children:e.jsxs(y,{className:a.filterTrigger,children:[e.jsx(we,{})," Фильтр"]})})},Xe=()=>{const t=xe(),{data:o}=fe(),[n,{isLoading:d}]=ve();console.log(o);const[r,s]=c.useState({search:"",enclosure:void 0,floor:void 0,roomType:void 0,status:void 0}),[p,m]=c.useState(!1),[g,u]=c.useState(null),x=async()=>{try{await n(g?.id||1).unwrap(),m(!1)}catch{he.error("Удаление невозможно")}},h=[{title:"Корпус",dataIndex:["hull","name"],key:"hull"},{title:"Этаж",dataIndex:["floor","floor"],key:"floor"},{title:"Тип номера",dataIndex:"roomType",key:"roomType"},{title:"Примечание",dataIndex:"description",key:"description"},{title:"Статус",dataIndex:"status",key:"status",render:l=>e.jsx(_e,{style:{background:l.color,color:"#fff",border:"none",borderRadius:"12px",padding:"2px 12px"},children:l.name})},{title:"Действия",key:"actions",render:(l,f)=>e.jsx(be,{record:f,setSelectedItem:u,setDeleteModalOpen:m,editLink:"edit"})}],i=e.jsxs("div",{className:"table-header",children:[e.jsx("div",{style:{display:"flex",gap:"16px"},children:e.jsx(ye,{value:r.search,onChange:l=>s({...r,search:l.target.value}),placeholder:"Поиск",prefixIcon:e.jsx(Ce,{})})}),e.jsxs("div",{className:"table-header-filter",children:[e.jsx(Ue,{initialFilters:{enclosure:r.enclosure,floor:r.floor,roomType:r.roomType},onApply:l=>s({...r,...l}),onResetAll:()=>s({...r,enclosure:void 0,floor:void 0,roomType:void 0})}),e.jsx(y,{type:"primary",onClick:()=>t("create"),style:{height:"40px",borderRadius:"20px",padding:"0 24px",backgroundColor:"#2563EB"},children:"Создать"})]})]});return e.jsxs(e.Fragment,{children:[e.jsx(Ne,{title:i,data:o,columns:h,loading:!1}),e.jsx(ke,{isOpen:p,onClose:()=>m(!1),onDelete:x,isLoading:d,title:"Удалить номерной фонд?",description:`Номерной фонд "${g?.id}" будет удален из системы.`})]})},st=()=>e.jsx(Xe,{});export{st as default};
