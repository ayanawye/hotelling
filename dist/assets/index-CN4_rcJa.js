import{u as S,r as n,j as e,B as y,s as v,P as C}from"./index-CbnrRa6C.js";import{s as u,t as k,I as _,S as T,T as D}from"./organizationTypesApi-BjGicNoR.js";import{R as p,S as I}from"./constants-DjFwyy2P.js";import{D as R,T as O}from"./TableActions-B_fl8NNI.js";import{S as N}from"./SelectWithSearch-BkX9hQR8.js";import{T as M}from"./index-hJjDEiK8.js";import{A as W}from"./index-BaXxuMV4.js";const w="_optionWrapper_4vyor_11",L="_colorDot_4vyor_18",A="_label_4vyor_25",c={optionWrapper:w,colorDot:L,label:A},B=()=>{const a=S(),{data:r}=u(),[m,{isLoading:x}]=k(),[s,i]=n.useState({search:"",color:[]}),[h,l]=n.useState(!1),[d,g]=n.useState(null),b=async()=>{try{await m(Number(d?.id)||1).unwrap(),l(!1)}catch{v.error("Удаление невозможно")}},f=[{title:"Название",dataIndex:"name",key:"name"},{title:"Код",dataIndex:"code",key:"code"},{title:"Цвет статуса",dataIndex:"color",key:"color",render:t=>{const o=p[t]||{label:t,color:"#000",backgroundColor:"#f0f0f0"};return e.jsx(M,{style:{background:o.backgroundColor,color:o.color,border:"none",borderRadius:"20px",padding:"2px 16px",fontWeight:500},children:o.label})}},{title:"Действия",key:"actions",render:(t,o)=>e.jsx(O,{record:o,setSelectedItem:g,setDeleteModalOpen:l,editLink:"edit"})}],j=e.jsxs("div",{className:"table-header",children:[e.jsx("div",{style:{display:"flex",gap:"16px"},children:e.jsx(_,{value:s.search,onChange:t=>i({...s,search:t.target.value}),placeholder:"Поиск",prefixIcon:e.jsx(T,{})})}),e.jsxs("div",{className:"table-header-filter",children:[e.jsx(N,{mode:"multiple",maxTagCount:0,maxTagPlaceholder:()=>"Цвет статуса номера",allowClear:!0,suffixIcon:e.jsx(I,{}),placeholder:"Цвет статуса номера",onChange:t=>i({...s,color:t}),options:Object.entries(p).map(([t,o])=>({value:t,label:e.jsxs("div",{className:c.optionWrapper,children:[e.jsx("div",{className:c.colorDot,style:{backgroundColor:o.backgroundColor}}),e.jsx("span",{className:c.label,children:o.label})]})}))}),e.jsx(y,{type:"primary",onClick:()=>a("create"),style:{height:"40px",borderRadius:"20px",padding:"0 24px",backgroundColor:"#2563EB"},children:"Создать"})]})]});return e.jsxs(e.Fragment,{children:[e.jsx(D,{title:j,data:r,columns:f,loading:!1,rowKey:"id"}),e.jsx(R,{isOpen:h,onClose:()=>l(!1),onDelete:b,title:"Удалить статус?",isLoading:x,description:`Статус "${d?.name}" будет удален из системы.`})]})},$=()=>{const{isError:a,isLoading:r}=u();return r?e.jsx(C,{}):a?e.jsx(W,{title:"Ошибка загрузки статуса",type:"error"}):e.jsx(B,{})};export{$ as default};
